function removeAnimNode(){var a=document.getElementById(_id);a&&_body.removeChild(a)}function getBaseName(a,b){var c,b=b?b:40;return a.filename&&(c=a.filename.substring(Math.max(a.filename.lastIndexOf("\\"),a.filename.lastIndexOf("/"))+1),c.length>b&&(c=c.substr(0,30)+"..."+c.substr(c.length-7,c.length))),c}function getImages(){var a,b,c,d,e,f,g=[],h="",i=document.images;for(a=0,b=i.length;b>a;a++)c=i[a],!c.src||h.indexOf(c.src)>-1||c.src==location.href||(d=(c.src.split("/").slice(-1)||[])[0]||"",d=d.split("?")[0]||"",e=d.split(".").pop()||"IMG",c.src.indexOf("data:image/")>-1&&(e=c.src.split(";")[0].split("/")[1]),e.length>6&&(e="IMG"),f={url:c.src,name:d,title:c.alt||c.title||c.id||document.title||"",width:c.width||"",height:c.height||"",ext:e,type:"image"},h+=c.src,g.push(f));return g}var _id="download_plus_animation",_body=document.body,KEY="B0INXfYFmUVH";chrome.runtime.onMessage.addListener(function(a,b,c){var d,e;"download_start"==a&&(removeAnimNode(),d=document.createElement("div"),d.id=_id,_body.appendChild(d),setTimeout(function(){removeAnimNode()},2e3)),a.key==KEY&&"getImages"==a.type&&(e=getImages(),c({data:e,key:KEY}))});