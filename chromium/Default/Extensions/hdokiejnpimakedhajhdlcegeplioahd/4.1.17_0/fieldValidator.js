var FieldValidator=function(e){this.options=$.extend({summary:null,listParentEl:null,validators:[]},e);this.setup()};
(function(e){function j(a){if(!a||0===a.length)return null;a=a.filter(function(a){return!1===a.isValidResult});return 0<a.length?a[0].errorMsg:""}function g(a,d){a&&(a.removeClass("empty"),a.removeClass("warning"),a.removeClass("check"),!0===d?a.addClass("check"):!1===d?a.addClass("warning"):a.addClass("empty"))}function h(a,d,b){var c=LPTools.createElement("div",{"class":"col-1"},null);b=LPTools.createElement("div",{"class":"validation-img "+(b?"empty":"")},null);c.appendChild(b);var f=LPTools.createElement("div",
{"class":"col-11"},null);d&&f.appendChild(d);a=LPTools.createElement("div",{id:a,"class":"row"},null);a.appendChild(c);a.appendChild(f);return{validatorEl:a,stateEl:e(b),msgEl:e(f)}}FieldValidator.prototype.setup=function(){this.setupSummary();this.setupValidatorList();return this};FieldValidator.prototype.setupSummary=function(){if(this.options.summary&&this.options.validators&&0<this.options.validators.length){var a=h(this.options.summary.id,this.options.summary.errorMsg,!1);this.options.summary.stateEl=
a.stateEl;this.options.summary.msgEl=a.msgEl;this.options.summary.parentEl.empty();this.options.summary.parentEl.append(a.validatorEl);this.options.summary.parentEl.hide()}};FieldValidator.prototype.setupValidatorList=function(){if(this.options.listParentEl){for(var a=LPTools.createElement("div",null,null),d=0;d<this.options.validators.length;d++){var b=h(this.options.validators[d].id,this.options.validators[d].name,!0);b&&(this.options.validators[d].stateEl=b.stateEl,a.appendChild(b.validatorEl))}this.options.listParentEl.empty();
this.options.listParentEl.append(a)}};FieldValidator.prototype.updateStateList=function(){if(this.options.validators&&0<this.options.validators.length)for(var a=0;a<this.options.validators.length;a++)g(this.options.validators[a].stateEl,this.options.validators[a].isValidResult)};FieldValidator.prototype.updateStateSummary=function(a){this.options.summary&&(this.options.validators&&0<this.options.validators.length)&&(!1===a?(g(this.options.summary.stateEl,a),this.options.summary.msgEl.empty(),this.options.summary.msgEl.append(j(this.options.validators)),
this.options.summary.parentEl.show(),this.options.summary.labelEl&&this.options.summary.labelEl.hide()):(this.options.summary.parentEl.hide(),this.options.summary.labelEl&&this.options.summary.labelEl.show()))};FieldValidator.prototype.validate=function(a,d,b){var c=!1;if(a&&this.options.validators&&0!==this.options.validators.length){try{for(c=0;c<this.options.validators.length;c++)this.options.validators[c].isValidResult=this.options.validators[c].isValid(a)}catch(f){return console.log("Something went wrong while executing validation: "+
f),!1}c=this.options.validators;c=!c||0===c.length?!1:c.filter(function(a){return!0===a.isValidResult}).length==c.length;b||this.updateStateSummary(c);this.updateStateList();b=this.options.validators;a=c;if(d&&e.isFunction(d)&&!1===a&&b&&0<b.length){b=b.filter(function(a){return!0===a.isValidResult});for(a=0;a<b.length;a++)d(b.errorMsg)}}return c}})(jQuery);
