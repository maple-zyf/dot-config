DialogWithGroupInput=function(e,c){c=c||{};c.additionalHeaderClasses=void 0===c.additionalHeaderClasses?[]:c.additionalHeaderClasses;c.additionalHeaderClasses.push("icon");c.buttonAlign=c.buttonAlign||this.RIGHT_ALIGN;VaultItemDialog.call(this,e,c);this.updateFavButtonText=null};DialogWithGroupInput.prototype=Object.create(VaultItemDialog.prototype);DialogWithGroupInput.prototype.constructor=DialogWithGroupInput;
(function(){var e=Strings.translateString("Add Site to Favorites"),c=Strings.translateString("Remove Site from Favorites");DialogWithGroupInput.prototype.setup=function(a,b){var d=LPProxy.getGroups();d.sort(VaultItemBase.prototype.sortByNameAsc);for(var c=[],e=0,h=d.length;e<h;++e){var f=d[e];f instanceof DefaultGroup||c.push(f.getName())}this.setGroupDropdownValues(c);this.updateFavButtonText&&this.updateFavButtonText();VaultItemDialog.prototype.setup.apply(this,arguments)};DialogWithGroupInput.prototype.setGroupDropdownValues=
function(a){this.inputFields.group.setValues(a)};DialogWithGroupInput.prototype.save=function(a,b){a.saveFromDialog(b,this.getGroup(b),this.data.saveOptions)};DialogWithGroupInput.prototype.add=function(a){if(this.options.type)(new this.options.type).addFromDialog(a,this.getGroup(a),this.data.saveOptions);else throw"Dialog must provide a type for new item or override this function.";};DialogWithGroupInput.prototype.allowNoneGroup=function(){return!0};DialogWithGroupInput.prototype.addFavButton=function(){var a=
LPTools.createElement("div","itemButtons dialogItemButtons");this.buttonContainer.prepend(a);var b=LPTools.createElement("input",{type:"checkbox","class":"favButton"});a.appendChild(b);this.inputFields.fav=new DialogInput.Input(b);var d=LPTools.createElement("label",{"class":"favButtonLabel itemButton",title:e});a.appendChild(d);var g=this.updateFavButtonText=function(){b.checked?d.setAttribute("title",c):d.setAttribute("title",e)};$(d).bind("click",function(){b.checked=!b.checked;g()});this.actionButtonContainer=
LPTools.createElement("div","actionButtonContainer");a.appendChild(this.actionButtonContainer);this.actionButtonContainer=$(this.actionButtonContainer);return a};DialogWithGroupInput.prototype.getGroupField=function(){return"group"};DialogWithGroupInput.prototype.validate=function(a){var b=VaultItemDialog.prototype.validate.apply(this,arguments),d=this.getGroupField(a);if(a[d]){var c=LPProxy.getExistingGroupParent(a[d]);null===c&&-1<a[d].indexOf(SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX)&&(this.addError(d,
Strings.translateString("Sorry - group names starting with 'Shared-' are created by LastPass to indicate groups shared with other people. Please use a different name.")),b=!1);this.originalData[d]!==a[d]&&(c&&c.isReadOnly())&&(this.addError(d,Strings.translateString("You do not have permission to add items to this folder.")),b=!1)}return b};DialogWithGroupInput.prototype.getGroup=function(a){a=a[this.getGroupField(a)];!a&&this.allowNoneGroup()&&(a="(none)");var b=LPProxy.getGroupByName(a);!b&&a&&
(b=LPProxy.getExistingGroupParent(a),b=new DummyGroup(a,b?b.getSharedGroup():null));return b}})();
