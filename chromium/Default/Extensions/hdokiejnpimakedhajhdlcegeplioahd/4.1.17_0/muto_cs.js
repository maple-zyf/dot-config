var g_did_setupInputObserver=!1;
function setupInputObserver(a){null==a&&(a=document);var b;if(b=do_experimental_popupfill)b="undefined"!=typeof g_isfirefox&&g_isfirefox?a?a.g_did_setupInputObserver:null:g_did_setupInputObserver,b=!b;if(b){b="undefined"!=typeof window&&window?window:a.defaultView;var e=null;if("undefined"!=typeof WebKitMutationObserver)e=new WebKitMutationObserver(function(a){setTimeout(function(){mutationObserverCallBack(a)},0)});else if("undefined"==typeof MutationObserver)if("undefined"!=typeof b.MutationObserver){if(a&&
a.location&&a.location.href.indexOf(".xul"))return;e=new b.MutationObserver(function(a){setTimeout(function(){mutationObserverCallBack(a)},0)})}else return;null!=e&&(e.observe(a,{childList:!0,subtree:!0}),"undefined"!=typeof g_isfirefox&&g_isfirefox?a&&(a.g_did_setupInputObserver=!0):g_did_setupInputObserver=!0)}}var g_did_muto=!1,g_pending_recheck=!1,g_pending_eval=!1;
function mutationObserverCallBack(a){LPCTR("mutationObserver");var b=!1;a.forEach(function(a){g_isfirefox&&LP.getBrowser();var d;if(!1==b)for(d=0;d<a.addedNodes.length;d++){var c=a.addedNodes[d];if(1===c.nodeType&&("INPUT"==c.tagName||0<c.getElementsByTagName("INPUT").length||"SCRIPT"==c.tagName&&""!=c.src&&""===c.innerHTML)){b=!0;break}}if(!1==b)for(d=0;d<a.removedNodes.length;d++)if(c=a.removedNodes[d],1===c.nodeType&&("INPUT"==c.tagName||0<c.getElementsByTagName("INPUT").length)){b=!0;break}});
if(b)if(g_did_muto=!0,g_isfirefox){for(a=LP.getBrowser().contentWindow;null!=a.top&&a.top!=a;)a=a.top;a=lpGetBrowserForDocument(a.document);verbose_log("mutation observer triggers checkShouldRecheck");LP.checkShouldRecheck(a)}else a=LP_get_last_url_history(document),a.href!=get_doc_location_href(document)&&verbose_log("href changed from "+a.href+" to "+get_doc_location_href(document)),verbose_log("mutation observer triggers recheck, href = "+a.href+" hash = "+a.href_hash),g_pending_recheck||checkShouldRecheck({fromclick:!1,
frommuto:!0,href:a.href,href_hash:a.href_hash})};
