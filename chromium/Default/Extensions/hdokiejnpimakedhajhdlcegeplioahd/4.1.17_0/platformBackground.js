var allowcompressedfiletobesmall=1;(function(a){allowcompressedfiletobesmall=2;a.openLoginDialog=function(){a.openTabDialog("login")};a.openCreateAccountDialog=function(){openURL(getchromeurl("welcome.html"))}})(LPPlatform);
(function(a){a.getBigIcons=function(b){var a=opendb();createDataTable(a);if(a){var d=function(a,c){b(0<c.rows.length&&null!==c.rows.item(0).data?c.rows.item(0).data:"")};if(g_indexeddb){var c={rows:{item:function(b){return this[b]},length:0}};a.transaction("LastPassData","readonly").objectStore("LastPassData").openCursor(IDBKeyRange.only(db_prepend(g_username_hash)+"_bigicons")).onsuccess=function(b){(b=b.target.result)?(c.rows[c.rows.length]=b.value,c.rows.length++,b["continue"]()):d(null,c)}}else a.transaction(function(b){b.executeSql("SELECT * FROM LastPassData WHERE username_hash=? AND type=?",
[db_prepend(g_username_hash),"bigicons"],d,function(b,a){console_log(a)})})}};a.saveBigIcons=function(b){var a=opendb();createDataTable(a);a&&(g_indexeddb?a.transaction("LastPassData","readwrite").objectStore("LastPassData").put({username_hash:db_prepend(g_username_hash),type:"bigicons",data:b,usertype:db_prepend(g_username_hash)+"_bigicons"}):a.transaction(function(a){a.executeSql("REPLACE INTO LastPassData (username_hash, type, data) VALUES (?, ?, ?)",[db_prepend(g_username_hash),"bigicons",b],
function(){console_log("server.js : inserted")},function(b,a){console_log(a)})}))};a.updateBigIcons=function(){};var g=function(b,a){for(var d in b){var c=a[d];c&&(c.group=b[d])}};a.refreshGroupNames=function(a){a&&(g(a.sites,g_sites),g(a.notes,g_securenotes),g(a.applications,g_applications))};a.useDialogWindows=function(){return Preferences.get("htmlindialog")};var h={},j=function(a,e){return function(){a.apply(this,arguments);e.apply(this,arguments)}};a.openTabDialog=function(b,e){var d=b+(e?"-"+
JSON.stringify(e):""),c=h[d];if(c)a.activateDialog(c);else{var f={dialogWindow:a.useDialogWindows()&&(void 0===e||null===e||!e.virtualKeyboard)},c={url:getchromeurl("tabDialog.html?dialog="+b),loadHandler:j(a.openDialogLoadHandler("openDialog",[b,a.copyDataIfEdge(e),f]),function(a){h[d]=a}),closeHandler:function(){delete h[d]}};if(f.dialogWindow){var g=Preferences.get("dialogSizePrefs"),f=g[b];c.features={height:f?f.height:600,width:f?f.width:800,left:f?f.left:0,top:f?f.top:0};c.closeHandler=j(c.closeHandler,
function(a){g[b]={height:a.outerHeight,width:a.outerWidth,left:a.screenLeft||a.screenX,top:a.screenTop||a.screenY};Preferences.set("dialogSizePrefs",g);delete h[d]});a.openDialogWindow(c)}else switch(Preferences.get("openpref")){case "tabs":a.openTab(c);break;case "windows":a.openWindow(c);break;case "same":a.openSame(c)}}};a.stringifyFeatures=function(a){var e=[],d;for(d in a)e.push(d+"="+a[d]);return e.join(",")};a.doAjax=function(a){LPServer.ajax(a)};a.ajax=function(b){isOffline()?b.error&&b.error(null,
null,"offline"):a.doAjax(b)};a.isEdge=function(){return is_edge()};a.copyDataIfEdge=function(b){return a.isEdge()&&"undefined"!==typeof b?JSON.parse(JSON.stringify(b)):b}})(LPPlatform);
