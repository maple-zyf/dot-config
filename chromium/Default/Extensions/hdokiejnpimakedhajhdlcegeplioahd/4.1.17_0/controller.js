LPProxy={};
(function(){var P=null,M=Strings.translateString("(none)");Topics.get(Topics.CLEAR_DATA).subscribe(function(){l=null;LPProxy.clearModel()});LPProxy.getBaseURL=function(){return bg.base_url};LPProxy.logEvent=function(a){bg.lpevent(a)};LPProxy.encryptAES=function(a,b){return 0<a.length?bg.AES.Encrypt({pass:b,data:a,b64:!0,bits:256}):a};LPProxy.decryptAES=function(a,b){return bg.AES.Decrypt({pass:b,data:a,b64:!0,bits:256})};var j=function(a){return function(b,c,d){a(d)}},q=function(a,b){return function(c){try{switch(c){case "exceededlimit":a(Strings.translateString("Sorry, as a premium user, you are limited to one Shared Folder. Please consider using %1 if you would like more.",{type:"a",
attributes:{target:"_blank",href:LPProxy.getBaseURL()+"enterprise/"},text:"LastPass Enterprise"}));break;default:var d=$(jQuery.parseXML(c));ba(d,a,b)}}catch(e){LPPlatform.logException(e),a(Strings.Vault.UNEXPECTED_ERROR)}}},C=function(a,b,c){a=a[b];return"function"===typeof a?(a(c),!0):!1},ba=function(a,b,c){var d=a.find("result"),e=a.find("ok"),f=a.find("error"),g=a.find("failed");if(d.length){var e=d.attr("rc"),f=d.attr("msg"),g=d.attr("success"),h=d.attr("ok"),k=d.text().trim();if(void 0!==e){a=
c[e];if("function"===typeof a){a(d);return}switch(e){case "notoken":b("No token was provided. Request could not be completed");return;case "cantsharewithself":b("Cannot share an item with yourself.");return;case "alreadyexists":b(Strings.translateString("That group already exists."));return}}else if(void 0!==f){if(C(c,f,d))return}else if(void 0!==g){if(C(c,g,d))return}else if(void 0!==h){if(C(c,"ok"))return}else if("ok"===k){if(C(c,"ok")||C(c,a.find("status").text()))return}else if("bad"===k){b(a.find("message").text());
return}}else if(e.length){if(C(c,"ok",e))return}else if(f.length){if(d=f.attr("message")){b(d);return}}else if(g.length&&C(c,g.attr("reason"),g))return;b(Strings.Vault.UNEXPECTED_ERROR)},z=function(a,b){return function(c){try{c=jQuery.parseJSON(c);if("object"===typeof b){var d=b[c.error]||b[c.res]||b[c.reason]||b[c.status];if("function"===typeof d){d(c);return}b=b["default"]}if(c.error)switch(c.error){case "session_expired":a(Strings.translateString("ErrorSessionMsg"));return;case "not_allowed":a(Strings.translateString("Your Shared Folder action failed. Please check your permissions before trying again"));
return;default:a(c.errortxt||Strings.Vault.UNEXPECTED_ERROR);return}if(c.res)switch(c.res){case "success":break;default:a(Strings.Vault.UNEXPECTED_ERROR);return}b(c)}catch(e){LPPlatform.logException(e),a(Strings.Vault.UNEXPECTED_ERROR)}}},A=function(a){return function(){bg.have_binary()?a.apply(this,arguments):LPPlatform.supportsBinary()?dialogs.confirmation.open({title:Strings.translateString("Install Binary Component"),text:Strings.translateString("This feature requires the binary version of this browser extension. Would you like to install it now?"),
handler:function(){bg.install_binary()}}):dialogs.alert.open({title:Strings.translateString("Not Supported"),text:Strings.translateString("This feature requires an external binary component, which is currently not supported on this platform.")})}};LPProxy.logout=function(){bg.lpevent("v_off");bg.loggedOut(!1,"homelocal2")};LPProxy.copyUsername=function(a){bg.lpevent("v_cu");bg.copytoclipboard(a.getUsername())};LPProxy.copyPassword=function(a){bg.lpevent("v_cp");bg.copytoclipboard(a.getPassword());
bg.loglogin(a.getID())};LPProxy.copyURL=function(a){bg.lpevent("v_curl");bg.copytoclipboard(a.getURL())};LPProxy.goToURL=function(a){bg.lpevent("v_g2");bg.openURL(a.getURL())};LPProxy.copyToClipboard=function(a){bg.copytoclipboard(a)};var G=function(a){for(var b=[],c=0,d=a.length;c<d;++c)"0"!==a[c].getID()&&b.push(a[c].getID(!0));return b.join(",")};LPProxy.deleteItem=function(a,b){bg.lpevent("v_d");bg.deleteAid(G(a),window,!0,!0,b)};LPProxy.deleteFormFill=function(a,b,c){bg.lpevent("v_dff");bg.deleteformfill(a._data.ffid,
!0,!1,null,b,c)};LPProxy.deleteFolder=function(a,b){bg.lpevent("v_dg");bg.deleteAid(G(a),window,!0,!0,b)};LPProxy.launchSite=function(a){bg.lpevent("v_ls");bg.launch(a.getID(),!0)};LPProxy.launchApplication=A(function(a){bg.launchApp(a.getID())});LPProxy.moveToFolder=function(a,b,c,d){bg.moveSelectedToGroup(b._data.group,G(a),{skipConfirm:!0},c,d)};LPProxy.convertToSharedFolder=function(a,b,c,d){for(var e=[],f=0,g=a.length;f<g;++f){var h=a[f];e[h.getID()]=SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX+
h._data.group}LPProxy.createSharedFolder(b,function(){Topics.get(Topics.UPDATE_VAULT_STATE).publish({incrementAccountsVersion:!0,incrementAccountsVersionAmount:2});var f=$.extend({},b.getShareInfo());f.sharekey=f.key;bg.moveIntoSharedFolder(f,null,Q(a),e,!1,!1,!0,{successCallback:c,errorCallback:d})},d)};LPProxy.addGroup=function(a,b,c){bg.addEmptyGroup(a._data.group,b,c)};LPProxy.renameGroup=function(a,b,c,d){bg.renameGroup(a._data.group,b.group,{skipConfirm:!0},c,d)};var n=function(a){return function(){var b=
arguments;LPProxy.getToken(function(){a.apply(window,b)},arguments[arguments.length-1])}},J,ca=function(a){a?dialogs.alert.open({title:Strings.translateString("Generating Sharing Keys"),text:Strings.translateString("LastPass is currently generating unique sharing keys required for this action. Please try again later.")}):dialogs.sharingKey.open()};J=function(a){return function(){for(var b=[],c=0,d=arguments.length;c<d;++c)b.push(arguments[c]);var e=b[b.length-1],f=new SharedFolderUser({uid:bg.g_uid,
username:bg.g_username});LPProxy.getPublicKeys([f],function(){f.pubkey?(b.push(f),a.apply(window,b)):(LPPlatform.generateSharingKeys(ca),e())},e)}};var H=function(a){dialogs.inviteFriends.open(a)},da={invite:H,problems:function(a){var b=LPTools.createElement("table","settings dialogMargin"),c=LPTools.createElement("tr","settingsHeader");c.appendChild(LPTools.createElement("th",null,Strings.translateString("Email Address")));c.appendChild(LPTools.createElement("th",null,Strings.translateString("Reason")));
b.appendChild(c);for(var c=0,d=a.length;c<d;++c){var e=a[c],f=LPTools.createElement("tr","settingsRow"+(0!==c%2?" odd":""));f.appendChild(LPTools.createElement("td",null,e.email));f.appendChild(LPTools.createElement("td",null,e.reason));b.appendChild(f)}dialogs.alert.open({title:Strings.translateString("Failed To Share With Some Users"),text:[Strings.translateString("We failed to share with the following users:"),b]})},"Please first verify your email.":function(){dialogs.verifyEmail.open({email:bg.g_username})}};
LPProxy.shareItems=function(a){bg.BackgroundServer.sharing.individual.shareItems($.extend(!0,a,{params:{logname:bg.g_prefoverrides.logname},callbacks:da,success:LPServer.extendCallback(a.success,function(){Topics.get(Topics.ITEM_SHARED).publish()})}))};LPProxy.resendShareInvitation=function(a){bg.BackgroundServer.sharing.individual.shareItems(a)};LPProxy.unshareItem=function(){bg.BackgroundServer.sharing.individual.unshareItem.apply(bg,arguments)};LPProxy.acceptShare=function(){bg.BackgroundServer.sharing.individual.acceptShare.apply(bg,
arguments)};LPProxy.rejectShare=function(){bg.BackgroundServer.sharing.individual.rejectShare.apply(bg,arguments)};LPProxy.renameSharedGroup=n(function(a,b,c,d){var e={update:1,rename:1};e.id=a.getID();e.name=a.getShareGroupName(b.group);e.sharename=bg.enccbc(b.group,a.getKey());e.token=l;e.xmlr=1;LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:e,dataType:"text",success:q(d,{ok:c}),error:j(d)})});LPProxy.parsePrivateKey=function(a){bg.parse_private_key(a,bg.rsaprivatekeyhex)};
LPProxy.parsePublicKey=function(a,b){bg.parse_public_key(a,b)};LPProxy.encrypt=function(a,b){return bg.enc(a,b)};LPProxy.decrypt=function(a,b){try{return bg.dec(a,b)}catch(c){return""}};LPProxy.getLocalKey=function(){return null!==bg?bg.g_local_key:""};LPProxy.encryptWithKey=function(a,b){return null!==bg?bg.lpenc(a,b):a};LPProxy.encryptWithBTOA=function(a){return null!==bg?bg.crypto_btoa(a):a};LPProxy.encryptMobile=function(a,b,c){return null!==bg?bg.lpmenc(a,b,c):a};LPProxy.decryptMobile=function(a,
b,c){return null!==bg?bg.lpmdec(a,b,c):a};var D,R=function(a,b,c,d,e,f){if(a._data.save_all&&a.isNew()&&a instanceof Account)c=a.getURLArguments(b,c,d),bg.saveAllSite(c+"&source=all",a._data,e,f);else if(!a.isNew()&&a.checkForSharedGroupChange(c)){d={};d[a.getID()]=c.getName();if(a=a.getShareInfo()?$.extend({},a.getShareInfo()):null)a.sharekey=a.key;if(c=c.getShareInfo()?$.extend({},c.getShareInfo()):null)c.sharekey=c.key;bg.moveIntoSharedFolder(c,a,[b],d,!1,!1,!0,{successCallback:e,errorCallback:f})}else c=
a.getURLArguments(b,c,d),c+="&source=vault",bg.saveSite(c,b,e,f)};D=function(a,b,c,d,e,f){if(b.attacharraychanges&&b.attacharraychanges.add&&0<b.attacharraychanges.add.length){var g=bg.AES.hex2bin(bg.lpdec(b.attachkey,c.getKey()));if(!g)throw new AttachmentKeyException;bg.fastEncryptAttachments(g,b.attacharraychanges.add,function(g){for(var k=0,m=g.length;k<m;++k)b.attacharraychanges.add[k].bytes=g[k].data;R(a,b,c,d,e,f)})}else R(a,b,c,d,e,f)};LPProxy.saveSite=function(a,b,c,d,e,f){if(LPTools.getOption(d,
"saveFromSubmit",!1))bg.saveSiteFromSubmit(a.getURLArguments(b,c,d),b,e,f);else{var g=e;if(b.fieldsChanged){for(var g={aid:a.getID(),urid:0,auto:1,update:1},h=$.param(g),k={},g=0;g<b.fields.length;++g){var m=b.fields[g];if("checkbox"!=m.type||m.checked){var K=a.getFieldPostData(m),j="_"+m.name;m.otherfield&&void 0!==m.formname&&(j="_"+m.formname+j);k[j]=K.value}}if(g=a.getShareInfo())k.sharedfolderid=g.id;k=$.param(k);g=function(){bg.saveFields(h,k,{aid:a.getID()},e,f)}}D(a,b,c,d,g,f)}};LPProxy.addSite=
function(a,b,c,d,e){LPTools.getOption(c,"saveFromSubmit",!1)?bg.saveSiteFromSubmit(a.getURLArguments(a._data,b,c),a._data,d,e):D(a,a._data,b,c,d,e)};LPProxy.saveNote=function(a,b,c,d,e,f){D(a,b,c,d,e,f)};LPProxy.addNote=function(a,b,c,d,e){D(a,a._data,b,c,d,e)};LPProxy.saveApplication=function(a,b,c,d,e,f){D(a,b,c,d,e,f)};LPProxy.addApplication=function(a,b,c,d,e){D(a,a._data,b,c,d,e)};LPProxy.addFormFill=function(a,b,c){var d=a.getPostData(a._data);d.cmd=a._data.cmd="add";bg.addeditformfill(d,a._data,
b,c)};LPProxy.saveFormFill=function(a,b,c,d){a=a.getPostData(b);a.cmd=b.cmd="edit";bg.addeditformfill(a,b,c,d)};LPProxy.getShareInfo=function(a){var b=null;$.each(bg.g_shares,function(c,d){if(d.id===a)return b=d,!1});return b};LPProxy.getImage=function(a){var b=!0,c=bg.getbigicon(a._model.getURL());null===c&&(b=!1,c=bg.geticonurlfromrecord(a._model._data,!0));a.bigImg=b;return c};var S=function(a){for(var b in a)if(a[b].isReceivedShare())return!0;return!1};LPProxy.hasReceivedShares=function(){return 0<
bg.g_pendings.length||S(r)||S(s)};LPProxy.getPendingRecievedShares=function(){var a=[];if(LPTools.hasProperties(v))if(bg.rsaprivatekeyhex){var b=0,c;for(c in v)try{a.push(v[c].newDisplayObject())}catch(d){++b}0<b&&Topics.get(Topics.ERROR).publish(Strings.translateString("%1 Pending Shares could not be decrypted.",b))}else Topics.get(Topics.ERROR).publish(Strings.translateString("No private key. Cannot decrypt Pending Shares."));return a};LPProxy.getPendingRecievedShare=function(a){return v[a]};LPProxy.getEmergencyAccessRecipientModels=
function(){var a=[],b;for(b in w)a.push(w[b]);return a};LPProxy.getEmergencyAccessRecipientModel=function(a){return w[a]};LPProxy.assignItemsToGroups=function(a,b){var c={},d;for(d in p)c[d]=p[d].newDisplayObject();b="undefined"===typeof b?!0:b;d=0;for(var e=a.length;d<e;++d){var f=a[d],g=f._model._data.group||M,h=c[g];if(void 0===h){for(var h=LPProxy.addDummyGroups(f._model,!1),k=0,m=h.length;k<m;++k){var K=h[k];c[K.getName()]=K.newDisplayObject()}h=c[g]}h._items.push(f);f.setParent(h)}for(var j in c)if(d=
c[j],e=d._model.getGroupParentName())e=c[e],void 0!==e&&null===d._parent&&(e._subGroups.push(d),d.setParent(e));j=[];for(var l in c)d=c[l],d._destructed||(!b&&0===d.getItemChildren().length?d.destruct():null===d._parent&&j.push(d));return j};var T=function(a,b){var c=null;null!==a&&(c=bg.g_identity,void 0!==a&&(c=a.getID()));var d=null;null!==c&&$.each(bg.g_identities,function(a,f){if(f.iid===c){d={};for(var g=f[b].split(","),h=0;h<g.length;++h)d[g[h]]=!0;return!1}});return d};LPProxy.getAllModelItems=
function(){return LPTools.objectsToArray(r,s,t)};LPProxy.getAllSharedGroupModelsByID=function(){return $.extend({},u)};LPProxy.getAllItems=function(a){var b=LPProxy.getSites(a).concat(LPProxy.getNotes(a)).concat(LPProxy.getApplications(a)),c=!0;a&&a.identity instanceof Identity&&(c=a.identity instanceof AllIdentity);return LPProxy.assignItemsToGroups(b,c).concat(LPProxy.getFormFills(a))};LPProxy.getApplicationModel=function(a){return B[a]};LPProxy.getApplications=function(a){return N(B,"appaids",
a)};var r={},s={},t={},B={},u={},E={},v={},I={},w={},p={},U=function(a){if(a instanceof Account)return r;if(a instanceof Note)return s;if(a instanceof FormFill)return t;if(a instanceof Application)return B;if(a instanceof SharedGroup)return u;if(a instanceof Group)return E;if("undefined"!==typeof PendingReceivedSharedItem&&a instanceof PendingReceivedSharedItem)return v;if("undefined"!==typeof EmergencyAccessRecipient&&a instanceof EmergencyAccessRecipient)return w;if("undefined"!==typeof EmergencyAccessSharer&&
a instanceof EmergencyAccessSharer)return I};LPProxy.removeItem=function(a){var b=U(a);b&&delete b[a.getID()];a instanceof Group&&delete p[a.getName()]};LPProxy.addItem=function(a){var b=U(a);b&&(b[a.getID()]=a);a instanceof Group&&(p[a.getName()]=a)};LPProxy.getExistingGroupParent=function(a){for(;0<a.length;)if(void 0===p[a])a=a.substring(0,a.lastIndexOf("\\"));else return p[a];return null};var V=function(a,b,c,d){a=new a(b,d);if(void 0===c||c)p[a.getName()]=a;return a};LPProxy.addDummyGroups=function(a,
b){var c=a.getSharedGroup(),d=a._data.group,e=[];a instanceof DummyGroup&&(p[a.getName()]=a);if(d){var f=-1;do{var f=d.indexOf("\\",f+1),g=d.substring(0,-1===f?d.length:f);void 0===p[g]&&e.push(V(DummyGroup,g,b,c))}while(-1<f)}else void 0===p[M]&&e.push(V(DefaultGroup,M,b));return e};LPProxy.clearModel=function(){r={};s={};t={};B={};E={};u={};p={};v={};I={};w={}};var x=function(a,b){for(var c in a)if(void 0===b[c]){var d=a[c];d.deleteUpdates(!1);d.removed=!0}},W=function(a){for(var b in a){var c=
a[b];p[c.getName()]=c}},L=function(a){for(var b in a)LPProxy.addDummyGroups(a[b])};LPProxy.initializeModel=function(){p={};var a={},b={},c=LPPlatform.getBackgroundData(bg.g_emer_sharers);if(c&&"undefined"!==typeof EmergencyAccessSharer)for(var d=0,e=c.length;d<e;++d){var f=c[d],g=f.username,h=I[g];I[g]=h=h?h.refresh(f):new EmergencyAccessSharer(f);a[g]=!0;h.allowedAccess()&&(b[h.getName()]=!0)}x(I,a);a={};if((c=LPPlatform.getBackgroundData(bg.g_emer_sharees))&&"undefined"!==typeof EmergencyAccessRecipient){d=
0;for(e=c.length;d<e;++d)f=c[d],g=f.username,h=w[g],w[g]=h?h.refresh(f):new EmergencyAccessRecipient(f),a[g]=!0}x(w,a);(a=bg.get_personal_linked())?Topics.get(Topics.ACCOUNT_LINKED).publish():Topics.get(Topics.ACCOUNT_UNLINKED).publish();var c={},d=LPPlatform.getBackgroundData(bg.g_sites),k;for(k in d)e=d[k],"http://group"===e.url&&e.sharefolderid===k&&(f=LPProxy.getShareInfo(k),g=u[k],k===a?P=g=g?g.refresh(e,f):new LinkedGroup(e,f):b[e.group]?g=g?g.refresh(e,f):new EmergencyAccessGroup(e,f):b[e.group.substring(SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX.length)]?
(e.group=e.group.substring(SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX.length),g=g?g.refresh(e,f):new EmergencyAccessGroup(e,f)):g=g?g.refresh(e,f):new SharedGroup(e,f),u[k]=g,c[k]=!0);x(u,c);W(u);b={};k={};var a=LPPlatform.getBackgroundData(bg.g_sites),m;for(m in a)if(c=a[m],d=u[c.sharefolderid],"http://group"===c.url){if(void 0===d||-1<c.group.indexOf("\\"))e=(e=E[m])?e.refresh(c,d):new Group(c,d),E[m]=e,k[m]=!0}else e=r[m],r[m]=e?e.refresh(c,d):new Account(c,d),b[m]=!0;x(r,b);x(E,k);W(E);L(E);
L(r);m={};b=LPPlatform.getBackgroundData(bg.g_securenotes);k=LPPlatform.getBackgroundData(bg.lp_attaches);for(var j in b){a=b[j];c=[];if("1"===a.attachpresent){d=0;for(e=k.length;d<e;++d)f=k[d],f.parent===a.aid&&c.push(new Attachment(f))}d=u[a.sharefolderid];e=s[j];s[j]=e?e.refresh(a,d,c):new Note(a,d,c);m[j]=!0}x(s,m);L(s);j={};m=LPPlatform.getBackgroundData(bg.g_applications);for(var l in m)b=m[l],k=B[l],a=u[b.sharefolderid],B[l]=k?k.refresh(b,a):new Application(b,a),j[l]=!0;x(B,j);L(B);l={};j=
LPPlatform.getBackgroundData(bg.g_formfills);m=0;for(b=j.length;m<b;++m)k=j[m],a=k.ffid,c=t[a],d=u[k.sharefolderid],t[a]=c?c.refresh(k,d):new FormFill(k,d),l[a]=!0;x(t,l);l={};j=LPPlatform.getBackgroundData(bg.g_pendings);if("undefined"!==typeof PendingReceivedSharedItem){m=0;for(b=j.length;m<b;++m)k=j[m],a=k.id,c=v[a],v[a]=c?c.refresh(k):new PendingReceivedSharedItem(k),l[a]=!0}x(v,l);bg.refreshGroupNames()};LPProxy.getModel=function(a,b){switch(b){case "Account":return LPProxy.getSiteModel(a);case "Note":return LPProxy.getNoteModel(a);
case "FormFill":return LPProxy.getFormFillModel(a);case "Application":return LPProxy.getApplicationModel(a)}};LPProxy.getGroups=function(){return LPTools.objectsToArray(p)};LPProxy.getGroupByName=function(a){return p[a]};var N=function(a,b,c){var d=LPTools.getOption(c,"identity",void 0);b=LPTools.getOption(c,"filter",T(d,b));c=LPTools.getOption(c,"invertIdentity",!1)||LPTools.getOption(c,"invertFilter",!1);d=[];if(b&&!c)for(var e in b){if(!b||b[e]&&!c||void 0===b[e]&&c){var f=a[e];f&&d.push(f.newDisplayObject())}}else for(f in a)(!b||
b[f]&&!c||void 0===b[f]&&c)&&d.push(a[f].newDisplayObject());return d};LPProxy.getSiteModel=function(a){return r[a]};LPProxy.getSiteModels=function(){return LPTools.objectsToArray(r)};LPProxy.getSite=function(a){return(a=r[a])?a.newDisplayObject():null};LPProxy.getSites=function(a){return N(r,"aids",a)};LPProxy.getNoteModel=function(a){return s[a]};LPProxy.getNote=function(a){return(a=s[a])?a.newDisplayObject():null};LPProxy.getNotes=function(a){return N(s,"aids",a)};LPProxy.getItemsByShareID=function(a){for(var b=
[],c=LPProxy.getAllModelItems(),d=0,e=c.length;d<e;++d){var f=c[d];f.getShareID()===a&&b.push(f)}return b};LPProxy.getFormFillModel=function(a){return t[a]};LPProxy.getFormFillModels=function(){return LPTools.objectsToArray(t)};LPProxy.getModelCount=function(){return LPTools.objectsToArray(r).length+LPTools.objectsToArray(t).length+LPTools.objectsToArray(s).length};LPProxy.getFormFill=function(a){return(a=t[a])?a.newDisplayObject():null};LPProxy.getFormFills=function(a){var b=[],c=LPTools.getOption(a,
"identity",void 0),c=LPTools.getOption(a,"filter",T(c,"ffids"));a=LPTools.getOption(a,"invertIdentity",!1);for(var d in t){var e=t[d];(!c||c[d]&&!a||void 0===c[d]&&a)&&b.push(new FormFillDisplay(e))}return b};LPProxy.getIdentities=function(){var a=[new AllIdentity];$.each(bg.g_identities,function(b,c){var d=new Identity(c);a.push(d)});return a};LPProxy.enableCurrentIdentity=function(a){for(var b=0,c=a.length;b<c;++b){var d=a[b];if(d.getID()===bg.g_identity){d.enable({reprompt:!1});break}}};LPProxy.enableIdentity=
function(a){bg.lpevent("v_cid");bg.switch_identity(a._data.iid,!0)};LPProxy.getAccountClass=function(){var a=Constants.USER_FREE;!0===bg.g_iscompanyadmin?a=Constants.USER_ENTERPRISE_ADMIN:"1"===bg.g_enterpriseuser?a=Constants.USER_ENTERPRISE:bg.g_premium_exp>LPTools.get_gmt_timestamp()&&(a=Constants.USER_PREMIUM);return a};LPProxy.getUser=function(){return new User(bg.g_username,LPProxy.getAccountClass(),this.getIdentities())};LPProxy.isEnterpriseUser=function(){var a=LPProxy.getAccountClass();return a===
Constants.USER_ENTERPRISE||a===Constants.USER_ENTERPRISE_ADMIN};LPProxy.getCreditMonitoringData=function(a,b){var c=LPProxy.getBaseURL()+"getCreditMonitoringData.php";LPPlatform.ajax({url:c,dataType:"text",success:z(b,a),error:j(b)})};LPProxy.getReceivedShareData=function(a){bg.BackgroundServer.sharing.individual.getReceivedShareData(a)};LPProxy.getSharedFolderData=function(a,b){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"getSharedFolderInfo.php",dataType:"text",success:z(b,function(b){a(b.folders)}),
error:j(b)})};LPProxy.getSentShareData=function(a){bg.BackgroundServer.sharing.individual.getSentShareData(a)};var l=null;LPProxy.getToken=function(a,b){if(void 0!==a)null!==l?a(l):LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"getCSRFToken.php",data:{token:l},success:function(b){l=b;a(l)},error:j(b)});else return l};LPProxy.deleteIdentity=function(a){bg.BackgroundServer.identities.remove(a)};LPProxy.addIdentity=function(a){bg.BackgroundServer.identities.add(a)};LPProxy.saveIdentity=function(a){bg.BackgroundServer.identities.update(a)};
LPProxy["import"]=function(){bg.lpevent("v_i");bg.openimport()};LPProxy["export"]=function(){bg.lpevent("v_e");bg.openexport()};LPProxy.openAllFavorites=function(){bg.lpevent("v_of");bg.openfavorites()};LPProxy.openBookmarklets=function(){bg.lpevent("v_bk");LPProxy.callAcctsIFrameCommand("bookmarklets")};LPProxy.openHistory=function(){bg.lpevent("v_his");LPProxy.callAcctsIFrameCommand("history")};var X=function(a){var b=(new Date).getTime(),c=bg.Preferences.get("reprompttime"),d=bg.get_last_reprompt_time();
b>d&&b-d<=1E3*c?a():Topics.get(Topics.REPROMPT).publish(a)},ea=function(a){if(a){a instanceof Array||(a=[a]);for(var b=0,c=a.length;b<c;++b)if(bg.g_prompts[a[b]])return!0;return!1}return!0};LPProxy.reprompt=function(a,b){if(ea(LPTools.getOption(b,"types",null))){if("function"===typeof bg.singlefactor_reprompt)return bg.singlefactor_reprompt(function(){X(a,b)},a),!0;X(a,b)}else a();return!1};var y=null;LPProxy.callAcctsIFrameCommand=function(a,b){bg.unlock_plug2web();var c={rand:1E3*Math.random(),
command:a,version:LPProxy.getVersion(),newvault:1};b&&(c.commandid=b);y=LPTools.createElement("iframe","acctsiframe");y.src=-1!==document.location.href.indexOf("vault.php")?"iframe.php":"iframe.html";LPPlatform.addEventListener(y,"load",function(){y.contentWindow.goTo(LPProxy.getBaseURL()+"acctsiframe.php?"+$.param(c));LPTools.addClass(y,"loaded")});document.body.appendChild(y)};LPProxy.closeIFrame=function(){y&&(document.body.removeChild(y),y=null)};LPProxy.getDeletedItems=function(a,b){var c=LPProxy.getBaseURL()+
"getaccts.php",d={mobile:1,b64:1,shap:1};d.u=bg.g_username_hash;d.only_deleted=1;LPPlatform.ajax({type:"POST",url:c,data:d,dataType:"text",success:function(b){var c=[],d=[];b=atob(b);bg.parsemobile(b,b.length,-1,0,null,c,d,null,null,null,null,null,!0,!1,null,null,null,null,null,null,null,null,[],null,null,null,null,null,null,null);b=[];for(var h=0,k=c.length;h<k;++h){var m=c[h];m.url=bg.AES.hex2url(m.url);"http://group"!==m.url&&b.push((new Account(m)).newDisplayObject())}c=0;for(h=d.length;c<h;++c)b.push((new Note(d[c])).newDisplayObject());
d=LPProxy.assignItemsToGroups(b,!1);c=0;for(b=d.length;c<b;++c)d[c].setDeleted();a(d)},error:j(b)})};LPProxy.getSharedFolderMembers=function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"getSharedFolderMembers.php",dataType:"text",data:{shareid:a.getID()},success:z(c,function(c){for(var e=[],f=c.users,g=0,h=f.length;g<h;++g)e.push(new SharedFolderUser(f[g],a));c=c.groups;f=0;for(g=c.length;f<g;++f)e.push(new SharedFolderUserGroup(c[f],a));b(e)}),error:j(c)})};LPProxy.restoreDeletedItems=
n(function(a,b,c,d){a={src:"website",fromwebsite:1,ajax:1,extjs:1,undelete:1,aid:G(a),token:l};b&&(a.sharedfolderid=b);LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"show_website.php",data:a,dataType:"text",success:q(d,{accountundeleted:c,reload:c}),error:j(d)})});LPProxy.purgeDeletedItems=n(function(a,b,c,d){a={src:"website",fromwebsite:1,ajax:1,extjs:1,purgeext:1,aid:G(a),token:l};b&&(a.sharedfolderid=b);LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"show_website.php",data:a,dataType:"text",
success:q(d,{accountpurged:c}),error:j(d)})});LPProxy.removeSharedFolderMember=n(function(a,b,c){var d={xmlr:1,token:l};a.isMissingSharedFolderUser()?$.extend(d,{msfdelete:1,id:a._sharedGroup.getID(),msfuser:a.getID(!0)}):$.extend(d,{update:1,id:a._sharedGroup.getID(),"delete":1,uid:a.getID(!0)});LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",dataType:"text",data:d,success:q(c,{ok:b}),error:j(c)})});LPProxy.getPublicKeys=function(a,b,c){for(var d={},e=0,f=a.length;e<f;++e){var g=
a[e],h=g._data.username;g instanceof SharedFolderUserGroup&&(h=g._data.name);d[h]={type:g._data.type,id:g.getID()}}d={getpubkey:1,_dc:(new Date).getTime(),uid:JSON.stringify(d),jsonr:1};e=function(d){if(d.success){for(var e={},f={},g={},h=0;void 0!==d["pubkey"+h];){var j=d["pubkey"+h],l=d["uid"+h],n=d["username"+h],q=d["cgid"+h];if(q){var p=g[q];void 0===p&&(p=[],g[q]=p);p.push({uid:l,cgid:q,username:n,pubkey:j})}else e[l]=j,f[n]={uid:l,pubkey:j};++h}h={};if(d.groupname){d=d.groupname.split(",");
j=0;for(l=d.length;j<l;++j)h[d[j]]=!0}d=[];for(j=0;j<a.length;++j)l=a[j],l instanceof SharedFolderUserGroup?h[l.getName()]?(a.splice(j,1),--j,d.push(l)):l.users=g[l.getID()]:(l.pubkey=e[l.getID()],void 0===l.pubkey&&(n=f[l.getName()],l.pubkey=n.pubkey,l.setID(n.uid)));0<d.length&&dialogs.alert.open({title:Strings.translateString("Error"),text:[Strings.translateString("The following user groups are empty and cannot be added."),Strings.translateString("Please try again once users have been added."),
LPTools.buildDialogItemContainer(d)]});b(a)}else c(Strings.Vault.UNEXPECTED_ERROR),LPPlatform.logError("getpubkey returned the following unexepcted value for response: "+d.success)};LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:d,dataType:"text",success:z(c,{nouser:function(a){c();dialogs.inviteFriends.open({emails:a.unknownusers.split(",")})},"default":e,emptygroup:e,noshareerr:function(){c(Strings.translateString("Sorry, company policy prohibits use of this feature."))}}),
error:j(c)})};var F=LPProxy,Y,Z=function(a,b){var c=new bg.RSAKey;LPProxy.parsePublicKey(c,b);return c.encrypt(bg.AES.bin2hex(a))};Y=n(function(a,b,c,d,e){LPProxy.getPublicKeys(b,function(){if(0<b.length){for(var f={id:a.getID(),update:1,add:1,sharename:a.getShareName(),name:a.getShareGroupName(),readonly:c.readonly?1:0,give:!c.hidePasswords?1:0,notify:c.notify?1:0,canadminister:c.can_administer?1:0,token:l,xmlr:1},g=[],h=0,k=0,m=b.length;k<m;++k){var n=b[k];if(n instanceof SharedFolderUser)n.pubkey?
(f["sharekey"+h]=Z(a.getKey(),n.pubkey),f["uid"+h]=n.getID(),f["cgid"+h]="",++h):g.push(n);else for(var n=n.users,p=0;p<n.length;++p){var r=n[p];r.pubkey?(f["sharekey"+h]=Z(a.getKey(),r.pubkey),f["uid"+h]=r.uid,f["cgid"+h]=r.cgid,++h):g.push(r)}}k=h=0;for(m=g.length;k<m;++k)n=g[k],n instanceof SharedFolderUser?(n._data.msfuser="1",f["msfuser"+h]=n.getID(),f["msfcgid"+h]=""):(f["msfuser"+h]=n.uid,f["msfcgid"+h]=n.cgid),++h;LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:f,dataType:"text",
success:q(e,{useradded:function(){if(0<g.length){for(var a=LPTools.createElement("ul","bulletList"),b=0,c=g.length;b<c;++b){var e=g[b],e=e instanceof SharedFolderUser?e.getName():e.username;a.appendChild(LPTools.createElement("li",null,e))}dialogs.alert.open({title:Strings.translateString("No Sharing Support"),text:[Strings.translateString("The following users do not currently have sharing keys."),Strings.translateString("They can generate sharing keys by logging into LastPass via the LastPass Internet Explorer, Firefox, or Google Chrome browser extensions, or by logging into the website and clicking on the Generate Sharing Keys link."),
Strings.translateString("Once they do that this Shared Folder will become accessible to them."),a]})}d()}}),error:j(e)})}else e()},e)});F.addSharedFolderMembers=Y;var F=LPProxy,fa=n(J(function(a,b,c,d,e){var f={id:0,update:1,newusername:bg.g_username+"-"+a.getName(),name:a.getShareGroupName(),token:l,xmlr:1},g=bg.get_random_password(),h=bg.get_key_iterations(bg.g_username),k=a._shareInfo.key=bg.make_lp_key_iterations(f.newusername,g,h);f.newhash=bg.make_lp_hash_iterations(k,g,h);g=new bg.RSAKey;LPProxy.parsePublicKey(g,
e.pubkey);f.sharekey=a._shareInfo.sharekey=g.encrypt(bg.AES.bin2hex(k));f.sharename=a._shareInfo.sharename=bg.enccbc(a.getName(),k);a._shareInfo.sharekeyaes=LPProxy.encryptMobile(f.newhash,!0,k);if(0<b.length){f.adminuidcnt=b.length;e=0;for(g=b.length;e<g;++e){var h=b[e],m=new bg.RSAKey;LPProxy.parsePublicKey(m,h.key);f["adminsharekey"+e]=m.encrypt(bg.AES.bin2hex(k));f["adminuid"+e]=h.uid}}LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:f,dataType:"text",success:q(d,{ok:function(b){a.setID(b.attr("id"));
bg.g_sites[a.getID()]=a._data;bg.g_shares.push(a._shareInfo);bg.increment_local_accts_version();c()},createsharedfolderuserfailed:function(){d(Strings.translateString("Could not create shared folder"))}}),error:j(d)})}));F.createSharedFolder=function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"getSuperUserInfo.php",dataType:"text",success:z(c,function(d){fa(a,d,b,c)}),error:j(c)})};LPProxy.deleteSharedFolder=n(function(a,b,c){var d=a.getID();a={id:d,"delete":1,token:l,xmlr:1};LPPlatform.ajax({type:"POST",
url:LPProxy.getBaseURL()+"share.php",data:a,dataType:"text",success:q(c,{deleted:function(){delete bg.g_sites[d];b()}}),error:j(c)})});LPProxy.createCreditMonitoringProfile=function(a,b,c){var d={cmd:"enroll",xml:1};d.ffid=a.getID();$.extend(d,a.getFormData({firstname:!0,lastname:!0,birthday:!0,ssn:!0,address1:!0,address2:!0,address3:!0,city:!0,state:!0,country:!0,zip:!0,phone:!0}));LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"creditmon.php",data:d,dataType:"text",success:q(c,{1:function(){Topics.get(Topics.SUCCESS).publish("Enrolled in credit monitoring.");
Topics.get(Topics.ENROLLED_CREDIT_MONITORING).publish();b()},"":function(a){c(a.attr("reason2"))}}),error:j(c)})};LPProxy.sendVerificationEmail=n(function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"settings.php",data:{testemail:1,email:a,extra:"verifysharing",token:l},success:function(){b()},error:j(c)})});var O=function(a,b,c,d,e){var f={};f.aid=a;b&&(f.sharedfolderid=b);LPPlatform.ajax({type:"POST",url:c,data:f,dataType:"text",success:z(e,function(a){for(var b=0,c=a.length;b<
c;++b){var e=a[b];a[b]={value:e[0],date:e[1],whom:2<e.length?e[2]:""}}d(a)}),error:j(e)})};LPProxy.getPasswordHistory=function(a,b,c,d){O(a,b,LPProxy.getBaseURL()+"getPasswordHist.php",c,d)};LPProxy.getUsernameHistory=function(a,b,c,d){O(a,b,LPProxy.getBaseURL()+"getUsernameHist.php",c,d)};LPProxy.getNoteHistory=function(a,b,c,d){O(a,b,LPProxy.getBaseURL()+"getNoteHist.php",c,d)};LPProxy.getSecurityChallengeScore=function(a){bg.get_securityChallengeScore(a)};LPProxy.getSharedFolderRestrictions=function(a,
b,c){var d={};d.shareid=a.getShareID();a instanceof SharedFolderUser?d.uid=a.getID():d.cgid=a.getID();LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"getSharedFolderRestrictions.php",data:d,dataType:"text",success:z(c,b),error:j(c)})};LPProxy.updateSharedFolderRestrictions=n(function(a,b,c,d){a={id:a._sharedGroup.getID(),edit:1,limit:1,token:l,aids:b.aids,numaids:0<b.aids.length?b.aids.split(",").length:0,additionaluids:b.additionaluids,hidebydefault:b.hidebydefault?1:0,uid:a.getID(!0)};LPPlatform.ajax({type:"POST",
url:LPProxy.getBaseURL()+"share.php",data:a,dataType:"text",success:function(){c()},error:j(d)})});LPProxy.unlinkAccount=n(function(a){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:{unlink:1,uid:a.params.id,token:l},dataType:"text",success:q(a.error,{ok:a.success}),error:j(a.error)})});var F=LPProxy,ga=J(function(a,b,c,d,e,f,g,h){d=new bg.RSAKey;LPProxy.parsePublicKey(d,h.pubkey);h=d.encrypt(bg.AES.bin2hex(b));d={id:0,update:1,link:1,xml:1};d.token=a.attr("token");d.newusername=
e.linkedEmail;d.newhash=c;d.sharekey=h;d.sharename=LPProxy.encryptWithKey(e.linkedEmail,b);d.name=e.linkedEmail;d.uid=a.attr("uid");d.linkvalid=1;LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:d,dataType:"text",success:q(g,{ok:f}),error:j(g)})});F.linkAccount=function(a,b,c){var d=bg.get_key_iterations(a.linkedEmail);bg.make_lp_key_hash_iterations(a.linkedEmail,a.linkedPassword,d,function(e,f){var g={verifylink:1,outofbandsupported:1,outofbandrequest:0,outofbandretry:0,xml:1};
g.username=a.linkedEmail;g.hash=f;g.iterations=d;LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"login.php",data:g,dataType:"text",success:q(c,{ok:function(g){ga(g,e,f,d,a,b,c)}}),error:j(c)})})};LPProxy.refreshSites=function(){bg.refreshsites()};LPProxy.getLinkedAccount=function(){return P};LPProxy.updateSharedFolderMemberPermissions=n(function(a,b,c,d){a={cmd:"edit",xml:1,token:l,shareid:a,request:JSON.stringify(b)};LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"editSharedFolderUsers.php",
data:a,dataType:"text",success:q(d,{ok:c}),error:j(d)})});LPProxy.stopStartDownloadingFolder=n(function(a,b,c,d){a={id:a.getID(),token:l,xmlr:1};b?a.startdownloading=1:a.stopdownloading=1;LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:a,dataType:"text",success:q(d,{ok:c}),error:j(d)})});var aa=function(a,b,c,d,e){c=b.getFieldPostData(c,!0);c.aid=b.getID();c.auto=1;c[a]=1;a=$.param(c);c=b.getShareInfo();var f="";c&&(f=$.param({sharedfolderid:c.id}));bg.saveFields(a,f,{aid:b.getID()},
d,e)};LPProxy.addField=function(a,b,c,d){aa("add",a,b,c,d)};LPProxy.deleteField=function(a,b,c,d){aa("delete",a,b,c,d)};LPProxy.autoChangePassword=function(a){bg.editAid(a,null,null,"1")};LPProxy.getPreference=function(a,b){return bg.Preferences.get(a,b)};LPProxy.setPreferences=function(a,b){bg.Preferences.set(a,b)};LPProxy.fillSite=function(a){bg.get_selected_tab_data(null,function(b){bg.setcurrenttabid(b.id);bg.setcurrenturl(b.url);bg.lpevent("m_mf");bg.fillaid(a.getID(),!0)})};LPProxy.fillProfile=
function(a){bg.lpevent("m_ff");bg.fillform(a.getID())};J=LPProxy;F=A(function(a){bg.addAttach(function(b){if(b.name&&0<b.name.length){var c=b.name;b=b.bytes;var d=bg.check_filename_badchars(c);d===bg.FILENAME_FRAGMENT_BAD_SHELL_CHARS?Topics.get(Topics.ERROR).publish(Strings.translateString("Suspicious characters found in selected filename, will not process it")):d===bg.FILENAME_FRAGMENT_BAD_CONTROL_CHARS?Topics.get(Topics.ERROR).publish(Strings.translateString("Control characters found in selected filename, will not process it")):
a(new Attachment({filename:c,id:Math.floor(99999*Math.random()).toString(),mimetype:bg.get_mimetype_from_filename(c),bytes:b}))}})});J.addAttachment=F;LPProxy.openAttachment=A(function(a){LPPlatform.openAttachment(a)});LPProxy.saveAttachment=A(function(a){LPPlatform.saveAttachment(a)});LPProxy.openAll=function(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c];e instanceof Account&&b.push(e._data)}bg.openAllSites(b)};LPProxy.getDomain=function(a){return bg.lp_gettld_url(a)};LPProxy.addToFavorites=
function(a,b,c){a=G(a);LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"groups.php",data:{aids:a,newfavaids:a,xml:1},dataType:"text",success:q(c,{ok:b}),error:j(c)})};LPProxy.restoreDeletedSharedFolder=n(function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:{id:a.getID(),undelete:1,token:l,xml:1},success:function(){b()},error:j(c)})});LPProxy.purgeDeletedSharedFolder=n(function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"share.php",data:{id:a.getID(),
purge:1,token:l,xml:1},success:function(){b()},error:j(c)})});var Q=function(a){for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].getID());return b};LPProxy.changePasswords=function(a){bg.changePassword(a.params.password,Q(a.params.items),!1,a.success,a.error)};var ha={problems:function(a){dialogs.alert.open({title:Strings.Vault.ERROR,text:a})}};LPProxy.inviteFriends=function(a){bg.BackgroundServer.sharing.individual.inviteFriends($.extend(!0,a,{callbacks:ha}))};var ia={enterprise:function(a,b){b.error(Strings.translateString("Sorry, LastPass Enterprise users can not act as emergency contacts."))}};
LPProxy.updateEmergencyAccessRecipient=function(a){a.callbacks=ia;bg.BackgroundServer.emergencyAccess.updateRecipient(a)};var ja={invite:H,nosharingkeys:function(a,b){b.error(Strings.translateString("User is missing sharing keys, please ask them to login to become an emergency contact."))}};LPProxy.addEmergencyAccessRecipient=function(a){a.callbacks=ja;bg.BackgroundServer.emergencyAccess.addRecipient(a)};LPProxy.revokeEmergencyAccessOffer=function(a){bg.BackgroundServer.emergencyAccess.removeRecipient(a)};
LPProxy.getEmergencyAccessRecipientInfo=function(a,b){bg.BackgroundServer.emergencyAccess.getRecipientInfo({params:{email:bg.g_username},success:function(b){for(var d=[],e=0,f=b.length;e<f;++e){var g=b[e];if(g.username){var h=w[g.username];h?h.refresh(g):(h=new EmergencyAccessRecipient(g),LPProxy.addItem(h));d.push(h.newDisplayObject())}}a(d)},error:b})};A=LPProxy;H=n(function(a,b){bg.BackgroundServer.emergencyAccess.getSharerInfo({success:function(b){for(var d=[],e=0,f=b.length;e<f;++e){var g=b[e];
if(g.username){var h=I[g.username];h?h.refresh(g):(h=new EmergencyAccessSharer(g),LPProxy.addItem(h));d.push(h.newDisplayObject())}}a(d)},error:b})});A.getEmergencyAccessSharerInfo=H;LPProxy.acceptEmergencyAccessOffer=function(a){bg.BackgroundServer.emergencyAccess.acceptOffer(a)};LPProxy.declineEmergencyAccessOffer=function(a){bg.BackgroundServer.emergencyAccess.declineOffer(a)};var ka={linked:function(a,b){b.error(Strings.translateString("This account is already linked"))},denied:function(a,b){b.error(Strings.translateString("You do not have permission to link this account"))},
successLinked:function(a,b){Topics.get(Topics.SUCCESS).publish(Strings.translateString("Access granted"));b.success(a)},successGranted:function(a,b){Topics.get(Topics.SUCCESS).publish(Strings.translateString("Access will be granted on %1",(new EmergencyAccessSharer(a)).getAccessDateAsString()));b.success(a)}};LPProxy.requestEmergencyAccess=function(a){a.callbacks=ka;bg.BackgroundServer.emergencyAccess.requestAccess(a)};LPProxy.unlinkEmergencyAccessAccount=function(a){bg.BackgroundServer.emergencyAccess.unlinkAccount(a)};
LPProxy.denyEmergencyAccess=function(a){bg.BackgroundServer.emergencyAccess.denyAccess(a)};LPProxy.getVersion=function(){return bg.lpversion};A=LPProxy;H=n(function(a,b){var c=new bg.RSAKey;bg.generate_key(c,function(c){var e=bg.encode_public_key(c);c=bg.encode_private_key(c);var f=LPProxy.getLocalKey(),g=bg.rsa_encrypt_privatekey(c,f);LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"uploadrsakeys_website.php",dataType:"text",data:{privatekeyenc:g,publickey:e,token:l,from:"generatesharingkeys.php",
userkeyhexhash:bg.SHA256(bg.AES.bin2hex(f)),privatekeyenchexhash:bg.SHA256(g)},success:q(b,{ok:function(){bg.rsaprivatekeyhex=g;Topics.get(Topics.SUCCESS).publish(Strings.translateString("Sharing keys generated."));a()}}),error:j(b)})})});A.generateSharingKeys=H;LPProxy.deleteCreditMonitoringAlert=n(function(a,b,c){LPPlatform.ajax({type:"POST",url:LPProxy.getBaseURL()+"creditmon.php",dataType:"text",data:{src:"website",cmd:"deletealert",id:a,token:l,_dc:(new Date).getTime()},success:q(c,{ok:b}),error:j(c)})});
LPProxy.getSiteMeta=function(a,b,c){a=LPProxy.getBaseURL()+"typeahead_addsite.php?q="+a;LPPlatform.ajax({type:"GET",url:a,dataType:"text",success:z(c,b),error:j(c)})}})();
